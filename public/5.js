(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{19:function(t,e,s){var n=s(52);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};s(7)(n,a);n.locals&&(t.exports=n.locals)},51:function(t,e,s){"use strict";s(19)},52:function(t,e,s){(t.exports=s(6)(!1)).push([t.i,"\n.custom-chip-style {\n    background: #e0e0e05e !important;\n    margin-top: 5px;\n    padding: 10px;\n    height: auto !important;\n    white-space: normal;\n    max-width: 400px;\n}\n.file_loader {\n    padding: 0px;\n    margin: 0px;\n    flex: unset;\n}\n.custom-chip-style .v-chip__content {\n    display: flex;\n    flex-direction: column;\n    align-items: end;\n}\n.custom-chip-style .v-chip__content p {\n    margin-bottom: 0;\n}\n.custom-chip-time {\n    margin: 0 5px;\n}\n.custom-chip-name {\n    font-weight: 600;\n    margin-bottom: 5px;\n}\n.custom-chip-message {\n    font-size: 16px;\n}\n.add-photos {\n    padding: 0 16px;\n}\n.custom-select {\n    padding-left: 16px;\n    padding-top: 16px;\n    max-width: 300px;\n}\n.custom-select .v-text-field__details {\n    display: none;\n}\n",""])},99:function(t,e,s){"use strict";s.r(e);var n=s(0),a=s.n(n),r=s(1),o=s(107),i=s(108);function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function u(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function p(t,e,s,n,a,r,o){try{var i=t[r](o),c=i.value}catch(t){return void s(t)}i.done?e(c):Promise.resolve(c).then(n,a)}function d(t){return function(){var e=this,s=arguments;return new Promise((function(n,a){var r=t.apply(e,s);function o(t){p(r,n,a,o,i,"next",t)}function i(t){p(r,n,a,o,i,"throw",t)}o(void 0)}))}}var m={data:function(){return{loader:!1,loading:!1,question:[],messages:[],photos:[],message:{text:""},items:["Нове запитання","Вирішене","Закрите"],status:null}},watch:{messages:function(){setTimeout((function(){window.scrollTo(0,document.body.scrollHeight)}))}},mounted:function(){var t=this;return d(a.a.mark((function e(){var s,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loader=!0,e.next=3,t.fetchMenuGroup({update:!1,slug:t.$route.params.slug});case 3:return e.next=5,t.getAnswers(t.$route.params.id);case 5:return s=e.sent,t.messages=s.data,e.next=9,t.getQuestion(t.$route.params.id);case 9:n=e.sent,t.question=n,t.status=t.items[n.status],t.setAppBarTitle("Питання"),t.setCreateButtonTitle(""),t.loader=!1;case 15:case"end":return e.stop()}}),e)})))()},computed:u({},Object(r.c)({user:"currentUser"})),methods:u(u(u({},Object(r.b)(["fetchMenuGroup","getAnswers","sendAnswers","getQuestion","change"])),Object(r.d)(["setAppBarTitle","setCreateButtonTitle","setCreateButtonUrl"])),{},{clearMessage:function(){this.message.text=""},sendMessage:function(){var t=this;return d(a.a.mark((function e(){var s,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.message.text){e.next=14;break}return t.loading=!0,(s=new FormData).append("message",t.message.text?t.message.text:""),t.photos&&t.photos.forEach((function(t){s.append("photos[]",t)})),e.next=7,t.sendAnswers({id:t.$route.params.id,data:s});case 7:return t.message.text="",t.photos=[],e.next=11,t.getAnswers(t.$route.params.id);case 11:n=e.sent,t.messages=n.data,t.loading=!1;case 14:case"end":return e.stop()}}),e)})))()},getStatusId:function(t){return"Нове запитання"==t?0:"Вирішене"==t?1:2},changeStatus:function(){var t=this;return d(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.change({id:t.$route.params.id,data:{status:t.getStatusId(t.status)}});case 2:t.$toast.open({message:"Статус оновлено!",position:"top-right",type:"success"});case 3:case"end":return e.stop()}}),e)})))()},format:function(t){var e=Object(o.a)(t,"yyyy-MM-dd HH:mm:ss",new Date);return Object(i.a)(e,"HH:mm")}})},f=(s(51),s(2)),g=Object(f.a)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-row",{staticClass:"no-gutters elevation-4"},[t.loader?s("loader"):s("v-col",{ref:"block",staticClass:"flex-grow-1 flex-shrink-0",attrs:{cols:"auto"}},[s("v-responsive",{staticClass:"overflow-y-hidden fill-height"},[s("v-card",{staticClass:"d-flex flex-column fill-height",attrs:{flat:""}},[s("div",{staticClass:"custom-select"},[s("v-select",{attrs:{items:t.items,label:"Статус запитання",solo:""},on:{change:t.changeStatus},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1),t._v(" "),t.question?s("div",[s("v-card-title",[t._v("\n                        "+t._s(t.question.title)+"\n                    ")]),t._v(" "),s("v-card-text",[t._v("\n                        "+t._s(t.question.descriptions)+"\n                    ")]),t._v(" "),t._l(t.question.photos,(function(e){return s("p",{staticClass:"add-photos"},[s("a",{attrs:{href:e.url,target:"_blank"}},[t._v(t._s(e.name))])])}))],2):t._e(),t._v(" "),s("v-card-text",{staticClass:"flex-grow-1 overflow-y-auto"},[t._l(t.messages,(function(e,n){return[s("div",{class:{"d-flex flex-row-reverse align-center":t.user.id===e.user.id}},[s("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){n.on;return[s("v-avatar",[s("img",{attrs:{src:e.user.main_photo.avatar,alt:"John"}})]),t._v(" "),s("v-chip",{staticClass:"custom-chip-style"},[s("span",{staticClass:"custom-chip-name"},[t._v(t._s(e.user.name))]),t._v(" "),s("p",{staticClass:"custom-chip-message"},[t._v(t._s(e.message))]),t._v(" "),t._l(e.photos,(function(n){return e.photos?s("span",[s("a",{attrs:{href:n.url,target:"_blank"}},[s("v-img",{attrs:{src:n.url,"max-height":"150","max-width":"250"}})],1)]):t._e()}))],2),t._v(" "),s("span",{staticClass:"custom-chip-time"},[t._v(t._s(t.format(e.created_at)))])]}}],null,!0)})],1)]}))],2),t._v(" "),s("v-col",{staticClass:"d-flex align-center",attrs:{cols:"8",sm:"5"}},[s("v-text-field",{attrs:{"clear-icon":"mdi-close-circle",clearable:"",label:"Повідомлення",type:"text"},on:{"click:append-outer":t.sendMessage,"click:clear":t.clearMessage},model:{value:t.message.text,callback:function(e){t.$set(t.message,"text",e)},expression:"message.text"}}),t._v(" "),s("v-file-input",{staticClass:"file_loader",attrs:{accept:"image/*","hide-input":"",multiple:""},model:{value:t.photos,callback:function(e){t.photos=e},expression:"photos"}}),t._v(" "),s("v-btn",{attrs:{loading:t.loading},on:{click:t.sendMessage}},[s("v-icon",[t._v("\n                            mdi-send\n                        ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=g.exports}}]);