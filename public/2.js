(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{20:function(e,t,n){var s=n(54);"string"==typeof s&&(s=[[e.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(7)(s,a);s.locals&&(e.exports=s.locals)},53:function(e,t,n){"use strict";n(20)},54:function(e,t,n){(e.exports=n(6)(!1)).push([e.i,"\n.custom-chip-style {\n    background: #e0e0e05e !important;\n    margin-top: 5px;\n    padding: 10px;\n    height: auto !important;\n    white-space: normal;\n    max-width: 400px;\n}\n.file_loader {\n    padding: 0px;\n    margin: 0px;\n    flex: unset;\n}\n.custom-chip-style .v-chip__content {\n    display: flex;\n    flex-direction: column;\n    align-items: end;\n}\n.custom-chip-style .v-chip__content p {\n    margin-bottom: 0;\n}\n.custom-chip-time {\n    margin: 0 5px;\n}\n.custom-chip-name {\n    font-weight: 600;\n    margin-bottom: 5px;\n}\n.custom-chip-message {\n    font-size: 16px;\n}\n.add-photos {\n    padding: 0 16px;\n}\n.custom-select {\n    padding-left: 16px;\n    padding-top: 16px;\n    max-width: 300px;\n}\n.custom-select .v-text-field__details {\n    display: none;\n}\n",""])},93:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(1),o=n(107),c=n(108);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n,s,a,r,o){try{var c=e[r](o),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(s,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(s,a){var r=e.apply(t,n);function o(e){p(r,s,a,o,c,"next",e)}function c(e){p(r,s,a,o,c,"throw",e)}o(void 0)}))}}var d={data:function(){return{loader:!1,loading:!1,chat:[],messages:[],photos:[],message:{text:""}}},watch:{messages:function(){setTimeout((function(){window.scrollTo(0,document.body.scrollHeight)}))}},mounted:function(){var e=this;return m(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loader=!0,t.next=3,e.fetchMenuGroup({update:!1,slug:e.$route.params.slug});case 3:return t.next=5,e.getMessages(e.$route.params.id);case 5:return e.messages=t.sent,t.next=8,e.getChat(e.$route.params.id);case 8:e.chat=t.sent,e.setAppBarTitle(e.chat.name),e.setCreateButtonTitle(""),e.loader=!1;case 12:case"end":return t.stop()}}),t)})))()},computed:l({},Object(r.c)({user:"currentUser"})),beforeRouteUpdate:function(e,t,n){var s=this;return m(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.loader=!0,t.next=3,s.getMessages(e.params.id);case 3:return s.messages=t.sent,t.next=6,s.getChat(e.params.id);case 6:s.chat=t.sent,s.setAppBarTitle(s.chat.name),s.setCreateButtonTitle(""),s.loader=!1,n();case 11:case"end":return t.stop()}}),t)})))()},methods:l(l(l({},Object(r.b)(["fetchMenuGroup","getMessages","getChat","sendMessageToChat"])),Object(r.d)(["setAppBarTitle","setCreateButtonTitle","setCreateButtonUrl"])),{},{clearMessage:function(){this.message.text=""},sendMessage:function(){var e=this;return m(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.message.text){t.next=13;break}return e.loading=!0,(n=new FormData).append("message",e.message.text?e.message.text:""),e.photos&&e.photos.forEach((function(e){n.append("photos[]",e)})),t.next=7,e.sendMessageToChat({id:e.$route.params.id,data:n});case 7:return e.message.text="",e.photos=[],t.next=11,e.getMessages(e.$route.params.id);case 11:e.messages=t.sent,e.loading=!1;case 13:case"end":return t.stop()}}),t)})))()},format:function(e){var t=Object(o.a)(e,"yyyy-MM-dd HH:mm:ss",new Date);return Object(c.a)(t,"HH:mm")}})},f=(n(53),n(2)),g=Object(f.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"no-gutters elevation-4"},[e.loader?n("loader"):n("v-col",{ref:"block",staticClass:"flex-grow-1 flex-shrink-0",attrs:{cols:"auto"}},[n("v-responsive",{staticClass:"overflow-y-hidden fill-height"},[n("v-card",{staticClass:"d-flex flex-column fill-height",attrs:{flat:""}},[e.messages.length?n("v-card-text",{staticClass:"flex-grow-1 overflow-y-auto"},[e._l(e.messages,(function(t,s){return[n("div",{class:{"d-flex flex-row-reverse align-center":e.user.id===t.user.id}},[n("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(s){s.on;return[n("v-avatar",[n("img",{attrs:{src:t.user.main_photo.avatar,alt:"John"}})]),e._v(" "),n("v-chip",{staticClass:"custom-chip-style"},[n("span",{staticClass:"custom-chip-name"},[e._v(e._s(t.user.name))]),e._v(" "),n("p",{staticClass:"custom-chip-message"},[e._v(e._s(t.message))]),e._v(" "),e._l(t.photos,(function(s){return t.photos?n("span",[n("a",{attrs:{href:s.url,target:"_blank"}},[n("v-img",{attrs:{src:s.url,"max-height":"150","max-width":"250"}})],1)]):e._e()}))],2),e._v(" "),n("span",{staticClass:"custom-chip-time"},[e._v(e._s(e.format(t.created_at)))])]}}],null,!0)})],1)]}))],2):n("h3",{staticClass:"text-center mt-15"},[e._v("\n                    Повідомлень поки не має!\n                ")]),e._v(" "),n("v-col",{staticClass:"d-flex align-center",attrs:{cols:"8",sm:"5"}},[n("v-text-field",{attrs:{"clear-icon":"mdi-close-circle",clearable:"",label:"Повідомлення",type:"text"},on:{"click:append-outer":e.sendMessage,"click:clear":e.clearMessage},model:{value:e.message.text,callback:function(t){e.$set(e.message,"text",t)},expression:"message.text"}}),e._v(" "),n("v-file-input",{staticClass:"file_loader",attrs:{accept:"image/*","hide-input":"",multiple:""},model:{value:e.photos,callback:function(t){e.photos=t},expression:"photos"}}),e._v(" "),n("v-btn",{attrs:{loading:e.loading},on:{click:e.sendMessage}},[n("v-icon",[e._v("\n                            mdi-send\n                        ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=g.exports}}]);